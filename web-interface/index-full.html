<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>知识库搜索系统 - 完整版</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>知识库搜索系统</h1>
            <p>基于Claude Code的智能内容检索 - 完整版</p>
            <div class="api-status" id="apiStatus">
                <span class="status-indicator">🔴</span>
                <span id="statusText">检查API连接...</span>
            </div>
        </header>

        <main>
            <!-- 搜索区域 -->
            <section class="search-section">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="输入您的问题..." class="search-input">
                    <button id="searchBtn" class="search-btn">搜索</button>
                </div>
                <div class="search-options">
                    <label>
                        <input type="checkbox" id="autoSearch" checked>
                        自动搜索
                    </label>
                    <label>
                        <input type="checkbox" id="showLog" checked>
                        显示对话日志
                    </label>
                    <button id="reindexBtn" class="reindex-btn">重新索引</button>
                </div>
            </section>

            <!-- 统计信息 -->
            <section class="stats-section">
                <div class="stats-container">
                    <div class="stat-item">
                        <span class="stat-number" id="totalFiles">-</span>
                        <span class="stat-label">文件总数</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalSize">-</span>
                        <span class="stat-label">总大小</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalCategories">-</span>
                        <span class="stat-label">分类数</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalTags">-</span>
                        <span class="stat-label">标签数</span>
                    </div>
                </div>
            </section>

            <!-- 搜索结果区域 -->
            <section class="results-section">
                <div class="results-header">
                    <h2>搜索结果</h2>
                    <span id="resultCount" class="result-count">共找到 0 个结果</span>
                </div>
                <div id="searchResults" class="search-results">
                    <div class="empty-state">
                        <p>请输入搜索关键词开始查找内容</p>
                    </div>
                </div>
            </section>

            <!-- 对话日志区域 -->
            <section id="logSection" class="log-section">
                <div class="log-header">
                    <h2>对话日志</h2>
                    <button id="clearLog" class="clear-log-btn">清空日志</button>
                </div>
                <div id="conversationLog" class="conversation-log">
                    <div class="log-entry">
                        <div class="log-time">系统启动</div>
                        <div class="log-content">知识库搜索系统已初始化</div>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2025 知识库搜索系统 - 基于Claude Code</p>
            <p>后端API运行在: <span id="apiUrl">http://localhost:3000</span></p>
        </footer>
    </div>

    <script src="script-api.js"></script>
</body>
</html>